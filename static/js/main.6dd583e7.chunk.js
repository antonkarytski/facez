(this.webpackJsonpfacez=this.webpackJsonpfacez||[]).push([[0],{18:function(e,t,n){e.exports={Container:"style_Container__2Rh7b",ResizeComponent:"style_ResizeComponent__3ZFN3",Element:"style_Element__ozzJc",SaveButton:"style_SaveButton__JfXUE"}},28:function(e,t,n){e.exports={Container:"style_Container__2TqBy",FaceWrap:"style_FaceWrap__2UbCI"}},33:function(e,t,n){e.exports={App:"style_App__196mm"}},34:function(e,t,n){e.exports={Container:"style_Container__UqD-Q"}},37:function(e,t,n){e.exports={Container:"style_Container__2KHOY"}},39:function(e,t,n){e.exports={Button:"styles_Button__38X36"}},60:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(20),i=n.n(c),o=n(33),s=n.n(o),u=n(3),l=n(15),j=n.n(l),b=n(21),f=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,a,c,i,o,s,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.method,a=void 0===r?"GET":r,c=t.body,i=t.token,o={"Content-Type":"application/json"},i&&("token",o.Authorization="JWT ".concat("token")),s={method:a,headers:o},c&&(s.body=JSON.stringify(c)),console.log(n),e.next=8,fetch(n,s);case 8:if(!(u=e.sent).ok){e.next=13;break}return e.next=12,u.json();case 12:return e.abrupt("return",e.sent);case 13:throw u;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d={assets:"".concat("https://facez-test.herokuapp.com/api/","assets")},O=Object(u.d)((function(){return f({url:d.assets})}));O.fail.watch((function(e){console.log(e)}));var p=n(9),h=n(2),v=n(12);var m=Object(u.e)(),x=Object(u.e)(),y=Object(u.g)([]).on(m,(function(e,t){return t.map((function(e){return function(e){var t=e.node,n=Object(v.a)(e,["node"]);return Object(h.a)({node:JSON.parse(t)},n)}(e)}))})).on(x,(function(e,t){return[].concat(Object(p.a)(e),[t])}));var _=n(6),g=n(34),C=n.n(g),S=n(43),q={driver:"text"};function w(e,t){var n=Object(h.a)(Object(h.a)({},q),t).driver,r=new FileReader;return new Promise((function(t,a){r.onloadend=function(e){var n;t(null===(n=e.target)||void 0===n?void 0:n.result)},r.onerror=function(e){a(e)},"arrayBuffer"!==n?"binaryString"!==n?"dataUrl"!==n?r.readAsText(e):r.readAsDataURL(e):r.readAsBinaryString(e):r.readAsArrayBuffer(e)}))}var N=n(36),A=n(5);function K(e,t){return Object.entries(t).reduce((function(e,t){var n=Object(A.a)(t,2);return function(e,t,n){if(!(t in e))return e;var r=Object(h.a)({},e);return r[n]=r[t],delete r[t],r}(e,n[0],n[1])}),e)}function k(e,t){return e(t),t.children=t.children.map((function(t){return k(e,t)})),t}var B=n(44);function z(e){var t=function(e){var t=e.match(/<!\[CDATA\[\s*(?:\.fil[0-9]+ {fill:#[0-9A-F]{6}}\s*)+/gm);if(t){var n=t[0].matchAll(/\.(fil[0-9]+) {fill:(#[0-9A-F]+)}/gm);return Object(p.a)(n).map((function(e){return{className:e[1],color:e[2]}}))}}(e);return t?function(e,t){var n=e.replace(/<defs>[\w\W]+<\/defs>/gm,"");return t.reduce((function(e,t){var n=t.color,r=t.className;return e.replaceAll('class="'.concat(r,'"'),'fill="'.concat(n,'"'))}),n)}(e,t):e}var T={class:"className","xml:space":"xmlSpace","xmlns:xlink":"xmlnsXlink"};function E(e){return k((function(e){e.attributes=K(e.attributes,T),e.attributes.uniqKey=Object(B.a)()}),e)}var J=n(37),R=n.n(J),F=n(13),D=Object(u.e)(),P=Object(u.e)(),U=Object(u.e)(),W=Object(u.d)(),I=Object(u.g)({}).on(D,(function(e,t){return Object(h.a)(Object(h.a)({},e),{},Object(F.a)({},t.uniqKey,function(e){var t=e.node,n=Object(v.a)(e,["node"]);return Object(h.a)({node:JSON.stringify(t)},n)}(t)))})).on(P,(function(e,t){var n=t.uniqKey,r=Object(v.a)(t,["uniqKey"]);return n in e?Object(h.a)(Object(h.a)({},e),{},Object(F.a)({},n,Object(h.a)(Object(h.a)({},e[n]),{},{_delete:!1},r))):r._id?Object(h.a)(Object(h.a)({},e),{},Object(F.a)({},n,r)):void 0})).on(U,(function(e,t){var n=t.uniqKey,r=t._id;if(r)return Object(h.a)(Object(h.a)({},e),{},Object(F.a)({},n,{_id:r,_delete:!0}));if(n in e){var a=Object(h.a)({},e);return delete a[n],a}})).reset(W);I.watch((function(e){console.log(e)}));var X=Object(u.a)({source:I,mapParams:function(e,t){return{cache:t}},effect:Object(u.d)((function(e){var t=e.cache,n=Object.entries(t).map((function(e){var t=Object(A.a)(e,2);t[0];return t[1]}));if(n.length)return f({url:d.assets,body:n,method:"PUT"})}))});X.fail.watch((function(e){console.log(e)}));var Z=n(1);function Y(){var e=Object(r.useCallback)(function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,a,c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t[0]);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:return r=z(n),e.next=8,Object(N.parse)(r);case 8:a=e.sent,c=E(a),i={node:o=c,offset:{x:0,y:0},scale:1,rotation:0,uniqKey:o.attributes.uniqKey},x(i),D(i);case 13:case"end":return e.stop()}var o}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),t=Object(S.a)({onDrop:e}),n=t.getRootProps,a=t.getInputProps,c=t.isDragActive;return Object(Z.jsxs)("div",Object(h.a)(Object(h.a)({},n()),{},{className:R.a.Container,children:[Object(Z.jsx)("input",Object(h.a)({},a())),c?Object(Z.jsx)("span",{children:"Release"}):Object(Z.jsx)("span",{children:"Drop face here"})]}))}function G(e){var t=e.toString().match(/[a-zA-Z]+$/g);return t?t[0]:""}function H(e){return+e.toString().replaceAll(/[^0-9.]/g,"")}var L=a.a.memo((function(e){var t=e.node,n=e.childNode,r=Object(v.a)(e,["node","childNode"]),c=t.attributes,i=(c.style,c.uniqKey,Object(v.a)(c,["style","uniqKey"])),o=n?{}:i.width&&i.height?{width:H(i.width)/4+G(i.width),height:H(i.height)/4+G(i.height)}:{};return a.a.createElement(t.name,Object(h.a)(Object(h.a)(Object(h.a)({},r),i),o),t.children.filter((function(e){return"element"===e.type})).map((function(e){return Object(Z.jsx)(L,{childNode:!0,node:e},e.attributes.uniqKey)})))}),(function(e,t){return e.node.attributes.uniqKey===t.node.attributes.uniqKey})),Q=L,$=n(38),M=n.n($),V=n(18),ee=n.n(V),te=n(16),ne=n(23),re=n(39),ae=n.n(re),ce=n(40),ie=n.n(ce);function oe(e){var t=e.label,n=e.onClick,r=e.className;return Object(Z.jsx)("button",{className:ie()(ae.a.Button,r),onClick:n,children:t})}function se(){var e=Object(ne.a)(y),t=Object(r.useState)(!1),n=Object(A.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(1),o=Object(A.a)(i,2),s=o[0],u=o[1];return Object(Z.jsxs)("div",{className:ee.a.Container,children:[Object(Z.jsx)(oe,{onClick:X,label:"Save",className:ee.a.SaveButton}),Object(Z.jsx)(te.b,{disabled:a,minScale:.1,limitToBounds:!1,onZoomStop:function(e){var t=e.state.scale;u(t)},children:Object(Z.jsx)(te.a,{wrapperClass:ee.a.ResizeComponent,children:e.map((function(e){var t=e.node,n=e.offset,r=e.uniqKey,a=e._id;return Object(Z.jsx)(M.a,{onStart:function(){return c(!0)},onStop:function(e,t){return function(e,t){var n=e._id,r=e.uniqKey,a=t.x,i=t.y;c(!1),P({uniqKey:r,_id:n,offset:{x:a,y:i}})}({uniqKey:r,_id:a},t)},defaultPosition:n,scale:s,children:Object(Z.jsx)("div",{children:Object(Z.jsx)(Q,{node:t,className:ee.a.Element})})},r)}))})})]})}function ue(){return Object(Z.jsxs)("div",{className:C.a.Container,children:[Object(Z.jsx)(Y,{}),Object(Z.jsx)(se,{})]})}var le=n(28),je=n.n(le);function be(){var e=Object(ne.a)(y);return Object(Z.jsx)("div",{className:je.a.Container,children:Object(Z.jsx)(te.b,{initialScale:.5,centerOnInit:!0,centerZoomedOut:!0,minScale:.05,limitToBounds:!1,children:Object(Z.jsx)(te.a,{wrapperClass:je.a.FaceWrap,children:e.map((function(e){var t=e.node,n=e.offset,r=e.uniqKey,a=(e._id,{transform:"translateX(".concat(n.x,"px) translateY(").concat(n.y,"px)")});return Object(Z.jsx)(Q,{node:t,style:a},r)}))})})})}function fe(){return Object(Z.jsx)("div",{children:Object(Z.jsx)(be,{})})}var de=function(){var e=Object(_.f)();return Object(r.useEffect)((function(){O().then((function(e){console.log(e),m(e)})).catch((function(e){console.log(e)}))}),[]),Object(Z.jsx)("div",{className:s.a.App,children:Object(Z.jsxs)(_.c,{location:e,children:[Object(Z.jsx)(_.a,{path:"/",exact:!0,children:Object(Z.jsx)(fe,{})}),Object(Z.jsx)(_.a,{path:"/admin",children:Object(Z.jsx)(ue,{})})]})})},Oe=n(27);i.a.render(Object(Z.jsx)(Oe.a,{basename:"/facez",children:Object(Z.jsx)(de,{})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.6dd583e7.chunk.js.map